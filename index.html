---
layout: default
---
<div class="usa-grid" style="margin-top: 2rem;">
    <div class="usa-width-one-half">
        <h1 class="usa-heading">Next meetup</h1>
        <div id="map" style="margin-bottom: 1rem;"></div>
        <h2 class="usa-heading" id="next-meetup-date"></h2>
        <p id="next-location"></p>
        <br>
        <p><span id="next-rsvps"></span> do-gooders will be there — what about you?</p>
        <a id="next-rsvp" href="#" target="_blank" class="usa-button">RSVP on Meetup »</a>
        <hr>
        <h2 class="usa-heading">Future meetups</h2>
        <h2 class="usa-heading" id="future-meetup-date"></h2>
        <p id="future-location"></p>
        <br>
        <p><span id="future-rsvps"></span> do-gooders will be there — what about you?</p>
        <br>
        <a id="future-rsvp" target="_blank" href="#" class="usa-button">RSVP on Meetup »</a>
        <p><a href="https://www.meetup.com/Code-for-DC/events/">See all upcoming events »</a></p>
    </div>
    <div class="usa-width-one-half">
        <h1 class="usa-heading">Join us at one of our upcoming project nights!</h1>
        <p class="usa-font-lead">
            Our twice-monthly meetups are open to anyone, and offer a chance to learn more about what we do, contribute
            to a current project, or just snag some free pizza!
        </p>
        <img src="assets/projnight.jpg">
    </div>
</div>
<div class="usa-grid-wide" style="margin-bottom: 2rem;">
    <div id="hero-image" class="usa-width-one-whole">
        <div id="hero-header-text" class="usa-width-two-thirds">
            <h1 id="hero-text">Code for DC</h1>
            <div id="hero-p">
                <p>Founded in 2012, we are a a non-partisan, non-political group of volunteer civic hackers working
                    together to solve local issues and help people engage with the city.</p>
            </div>
        </div>
    </div>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function (event) {
        mapboxgl.accessToken =
            'pk.eyJ1Ijoib3BlbmRhdGFkYyIsImEiOiJjanJneDkweHEycGMxNDNtbXJiNGdndDRuIn0.ToI609oBwJsdC8fiubjl9A';
        var map = new mapboxgl.Map({
            container: 'map', // HTML container id
            style: 'mapbox://styles/mapbox/streets-v9', // style URL
            center: [-77.0369, 38.9072], // starting position as [lng, lat]
            zoom: 13
        });
        $.ajax({
                type: "GET",
                dataType: 'jsonp',
                url: 'https://api.meetup.com/Code-for-DC/events?photo-host=public&page=20&sig_id=163907222&sig=f5fae4cf26e324516a55732b9ca095aba0cd6e04',
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
                beforeSend: function () {
                    $('#meetup').addClass('loading'); // Show loader icon
                },
                complete: function () {
                    $('#meetup').removeClass('loading'); // Hide loader icon
                }
            })
            .done((xhr) => {
                const nextMeetup = xhr.data[0]
                const futureMeetup = xhr.data[1]
                $('#next-meetup-date').html(
                    moment(!nextMeetup.time).isSame(moment(), 'day') ?
                    `${moment(nextMeetup.time).format('MM/DD/YYYY')}  ${moment(nextMeetup.time).format('h:mm')}` :
                    `Today @ ${moment(nextMeetup.time).format('h:mm')}`
                )
                $("#next-location").html(
                    `
                <a href="https://www.google.com/maps/place/@${nextMeetup.venue.lat},-${nextMeetup.venue.lon},13z" target="_blank">${nextMeetup.venue.address_1}</a>
                    `
                )
                $('#next-rsvps').html(nextMeetup.yes_rsvp_count);
                $('#next-rsvp').attr('href', `https://www.meetup.com/Code-for-DC/events/${nextMeetup.id}`);

                if (futureMeetup) {
                    $('#future-meetup-date').html(
                        `${moment(futureMeetup.time).format('MM/DD/YYYY')}  ${moment(futureMeetup.time).format('h:mm')}`
                    )
                    $("#future-location").html(
                        `
                            <a href="https://www.google.com/maps/place/@${futureMeetup.venue.lat},-${futureMeetup.venue.lon},13z" target="_blank">${futureMeetup.venue.address_1}</a>
                        `
                    )
                    $('#future-rsvps').html(futureMeetup.yes_rsvp_count);
                    $('#future-rsvp').attr('href', futureMeetup.link);

                } else {
                    $('#future-meetup-date').hide();
                    $('#future-location').hide();
                    $('#future-rsvps').hide();
                    $('#future-rsvp').hide();
                }



                var popup = new mapboxgl.Popup({
                        closeOnClick: false
                    })
                    .setLngLat([nextMeetup.venue.lon, nextMeetup.venue.lat])
                    .setHTML(
                        `
                        <div style="width: 12rem;">
                            <h3>Project Night</h3>
                            <p>${nextMeetup.venue.name}</p>
                        </div>
                    `
                    )
                    .addTo(map);
            });
    });

</script>
